# React框架学习  
## 一.介绍  
React由FaceBook前端官方团队维护，本项目是本人学习react写的demo。以vue的经验作为基础，所以会有一些对vue的类比。

### 开发概念：  
- 组件化：从**UI的角度**思考UI元素的复用
- 模块化：从**代码**的角度思考逻辑的复用

### React核心概念：  
#### 1.虚拟DOM 
DOM是由浏览器提供的，含有固定的API，而虚拟DOM则是我们自己手动创建的，他的功能由我们自己定义。  
一般使用js创建一个对象，来描述一颗DOM树，使用children这样的属性来描述子节点，这样嵌套下去形成一颗虚拟的树。  
**作用：** 在需要更新页面元素的时候使用虚拟dom树做对比，只更新有变化的dom来实现虚拟dom树的高效更新。  

#### 2.dom比对diff算法简介  
vue和react的对比都使用了diff算法，vue和react在diff算法的基础上都进行了一些改进。  

**diff算法：**  
整个dom树对比：tree.diff -> 组件对比：component.diff -> 元素对比：element.diff
1. 首先比对类型，如果类型都不同，则直接删除原来的node再使用新的node替换掉；
2. 比对属性：对于各种属性（如style,class,id）：具体的实现方式是将新的属性完全应用到新的dom上，再将不存在的旧的属性移除掉。对于事件，则是先将事件从旧的dom上移除掉，接着如果新的事件回调函数存在则再将其添加进去。  
>注：同时为了更高效的复用以及减少对dom的操作，vue与react都新增了key属性进行比对。使用key将新的虚拟dom映射到旧的虚拟dom，当需要操作dom元素时，会先去旧的dom元素中查找key是否存在，并设置一个最大索引值 lastIndex（初始为0）。如果旧的虚拟dom中存在该元素，则可以直接复用，或者更改一下位置。更改位置则依赖于 lastIndex ，如果新找到的元素的 index 比 lastIndex 要大，则将lastIndex更新，且这个新找到的元素只需要patch更新一下子元素。因为是按照顺序查找的，新的大说明他原本在老的 dom 中就在后面，所以不用动。如果新的元素的 index 小，那么则说明需要移动位置了，小说明原来在 lastIndex 这个元素的前面，现在顺序便利到后面来了，所以需要移动一下。vue和react都是这么做的。
3. 递归更新子节点。

## 二.Vue与React对比  
VUE通过.vue组件模版文件拆解成js逻辑，style_UI样式和template_UI结构；  
React则是只有js文件，通过js实现组件的三部分；  
在社区和扩展方面，react拥有更强大的支持，当然这部分暂时不用担心。学习主要还是关注代码实现的差异。

## 三.React开发实践  
### 1.React依赖  
- react：用来创建react组件、组件生命周期等
- react-dom：里面主要封装了和 DOM 操作相关的包，如把组件渲染到页面上  

### 2.常用API  
|需要的操作 | API | 介绍 |
|:----:| :----: | :----: |
创建虚拟dom，基本就是jsx语法 | React.createElement()| 接受最少三个参数：1.元素标签（如div）2.元素属性（如id）